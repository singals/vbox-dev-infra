---
- name: Add Docker GPG key
  apt_key: url=https://download.docker.com/linux/ubuntu/gpg

- name: Add Docker APT repository
  apt_repository:
    repo: deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ansible_distribution_release}} stable

- name: configure deb pkg
  command: dpkg --configure -a
  become: yes

- name: Install list of packages
  apt:
    name: ['apt-transport-https', 'ca-certificates', 'curl', 'software-properties-common', 'docker-ce']
    state: present
    update_cache: yes

- name: Install Pip.
  apt: name=python-pip state=present
  become: yes

- name: Install Docker Python library.
  pip: name=docker state=present
  become: yes

- name: Add Oracle java repository
  apt_repository: repo='ppa:webupd8team/java'

- name: Update apt
  apt: update_cache=yes

- name: Accept license terms
  debconf: name='oracle-java8-installer' question='shared/accepted-oracle-license-v1-1' value='true' vtype='select'

- name: Install Java
  apt:
    name: ['oracle-java8-installer', 'ca-certificates', 'oracle-java8-set-default']
    state: latest
    update_cache: yes